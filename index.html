<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Miscellaneous Adventure — Your Tax Officer Story Awaits</title>

  <!-- Fonts - Enhanced typography -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Sora:wght@600;700;800&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">

  <!-- Meta Tags -->
  <meta name="description" content="Embark on a hilarious journey as a Tax Officer. Story-driven web game with choices, unlockable chapters, and unforgettable characters." />
  <meta name="keywords" content="web game, story game, tax officer, interactive story, choice-based game" />
  <meta property="og:title" content="Miscellaneous Adventure — Tax Officer Story Game" />
  <meta property="og:description" content="Make choices, solve quirky tax cases, and become the most legendary tax officer in the city." />
  <meta property="og:type" content="website" />
  
  <!-- Favicon placeholder -->
  <link rel="icon" type="image/png" href="favicon/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="favicon/favicon.svg" />
  <link rel="shortcut icon" href="favicon/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png" />
  <link rel="manifest" href="favicon/site.webmanifest" />

  <style>
  /* ==========================================
     PROFESSIONAL DESIGN SYSTEM - V2.0
     Modern, Clean, Engaging
     ========================================== */
  
  :root {
    /* Color Palette - Professional & Modern */
    --primary-50: #f5f3ff;
    --primary-100: #ede9fe;
    --primary-200: #ddd6fe;
    --primary-300: #c4b5fd;
    --primary-400: #a78bfa;
    --primary-500: #8b5cf6;
    --primary-600: #7c3aed;
    --primary-700: #6d28d9;
    --primary-800: #5b21b6;
    --primary-900: #4c1d95;
    
    --accent-50: #fef3c7;
    --accent-400: #fbbf24;
    --accent-500: #f59e0b;
    --accent-600: #d97706;
    
    --success-400: #4ade80;
    --success-500: #22c55e;
    --success-600: #16a34a;
    
    --gray-50: #f9fafb;
    --gray-100: #f3f4f6;
    --gray-200: #e5e7eb;
    --gray-300: #d1d5db;
    --gray-400: #9ca3af;
    --gray-500: #6b7280;
    --gray-600: #4b5563;
    --gray-700: #374151;
    --gray-800: #1f2937;
    --gray-900: #111827;
    
    /* Semantic colors */
    --bg-primary: #ffffff;
    --bg-secondary: #fafbfc;
    --bg-tertiary: var(--gray-50);
    --text-primary: var(--gray-900);
    --text-secondary: var(--gray-600);
    --text-tertiary: var(--gray-500);
    
    /* Gradients */
    --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --gradient-warm: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    --gradient-success: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
    --gradient-gold: linear-gradient(135deg, #fbbf24 0%, #d97706 100%);
    --gradient-mesh: radial-gradient(at 40% 20%, #667eea 0px, transparent 50%),
                     radial-gradient(at 80% 0%, #764ba2 0px, transparent 50%),
                     radial-gradient(at 0% 50%, #f093fb 0px, transparent 50%);
    
    /* Shadows - Multi-level depth */
    --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
    --shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);
    --shadow-inner: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);
    --shadow-glow: 0 0 20px rgba(102, 126, 234, 0.4);
    
    /* Border radius */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 24px;
    --radius-2xl: 32px;
    --radius-full: 9999px;
    
    /* Spacing scale */
    --space-1: 4px;
    --space-2: 8px;
    --space-3: 12px;
    --space-4: 16px;
    --space-5: 20px;
    --space-6: 24px;
    --space-8: 32px;
    --space-10: 40px;
    --space-12: 48px;
    --space-16: 64px;
    --space-20: 80px;
    --space-24: 96px;
    
    /* Typography */
    --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    --font-display: 'Sora', 'Inter', sans-serif;
    --font-mono: 'JetBrains Mono', 'Courier New', monospace;
    
    /* Transitions */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-bounce: 500ms cubic-bezier(0.68, -0.55, 0.265, 1.55);
    
    /* Layout */
    --max-width-sm: 640px;
    --max-width-md: 768px;
    --max-width-lg: 1024px;
    --max-width-xl: 1280px;
    --max-width-2xl: 1536px;
    
    /* Z-index scale */
    --z-base: 1;
    --z-dropdown: 100;
    --z-sticky: 200;
    --z-fixed: 300;
    --z-modal-backdrop: 400;
    --z-modal: 500;
    --z-popover: 600;
    --z-tooltip: 700;
  }

  /* ==========================================
     RESET & BASE STYLES
     ========================================== */
  
  *, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }
  
  html {
    font-size: 16px;
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  body {
    min-height: 100vh;
    font-family: var(--font-sans);
    background: var(--bg-primary);
    color: var(--text-primary);
    line-height: 1.6;
    overflow-x: hidden;
    position: relative;
  }
  
  /* Animated gradient background overlay */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--gradient-mesh);
    opacity: 0.03;
    z-index: -1;
    pointer-events: none;
  }

  /* ==========================================
     TYPOGRAPHY SYSTEM
     ========================================== */
  
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
    font-weight: 700;
    line-height: 1.2;
    letter-spacing: -0.025em;
    color: var(--text-primary);
  }
  
  h1 {
    font-size: clamp(2.25rem, 5vw, 4.5rem);
    font-weight: 800;
    letter-spacing: -0.04em;
  }
  
  h2 {
    font-size: clamp(1.875rem, 4vw, 3.5rem);
    font-weight: 700;
  }
  
  h3 {
    font-size: clamp(1.5rem, 3vw, 2.25rem);
  }
  
  h4 {
    font-size: clamp(1.25rem, 2vw, 1.5rem);
  }
  
  p {
    line-height: 1.7;
    color: var(--text-secondary);
  }
  
  a {
    color: var(--primary-600);
    text-decoration: none;
    transition: color var(--transition-fast);
  }
  
  a:hover {
    color: var(--primary-700);
  }
  
  /* Text utilities */
  .text-gradient {
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  
  .text-balance {
    text-wrap: balance;
  }

  /* ==========================================
     LAYOUT COMPONENTS
     ========================================== */
  
  .container {
    width: 100%;
    max-width: var(--max-width-xl);
    margin: 0 auto;
    padding: 0 var(--space-6);
  }
  
  .container-wide {
    max-width: var(--max-width-2xl);
  }
  
  .container-narrow {
    max-width: var(--max-width-lg);
  }
  
  section {
    padding: var(--space-20) 0;
  }
  
  @media (max-width: 768px) {
    section {
      padding: var(--space-12) 0;
    }
    .container {
      padding: 0 var(--space-4);
    }
  }

  /* ==========================================
     NAVIGATION - Enhanced Professional Style
     ========================================== */
  
  .navbar {
    position: sticky;
    top: 0;
    z-index: var(--z-sticky);
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(12px) saturate(180%);
    border-bottom: 1px solid var(--gray-200);
    transition: all var(--transition-base);
  }
  
  .navbar.scrolled {
    background: rgba(255, 255, 255, 0.95);
    box-shadow: var(--shadow-sm);
  }
  
  .navbar-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-4) 0;
    gap: var(--space-6);
  }
  
  /* ==========================================
   LOGO DESIGN - Optimized for Image
   ========================================== */

  .logo {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    cursor: pointer;
    transition: transform var(--transition-base);
  }

  .logo:hover {
    transform: translateY(-2px);
  }

  /* Logo Image Styles */
  .logo-image {
    height: 48px;
    width: auto;
    max-width: 200px; /* Prevents logo from being too wide */
    object-fit: contain;
    display: block;
    transition: all var(--transition-base);
    filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.1));
  }

  .logo:hover .logo-image {
    filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.15));
  }

  /* Optional: If you want a container for the image with background */
  .logo-mark-image {
    height: 48px;
    width: 48px;
    border-radius: var(--radius-md);
    display: grid;
    place-items: center;
    background: white; /* or transparent */
    padding: var(--space-1);
    box-shadow: var(--shadow-md);
    position: relative;
    overflow: hidden;
    transition: all var(--transition-base);
  }

  .logo-mark-image img {
    height: 100%;
    width: 100%;
    object-fit: contain;
  }

  .logo-mark-image::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, transparent, rgba(255,255,255,0.2));
    opacity: 0;
    transition: opacity var(--transition-base);
  }

  .logo:hover .logo-mark-image::before {
    opacity: 1;
  }

  .logo:hover .logo-mark-image {
    transform: scale(1.05);
    box-shadow: var(--shadow-lg);
  }

  /* Logo Text Styles (if keeping text alongside image) */
  .logo-text {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .logo-title {
    font-family: var(--font-display);
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--text-primary);
    letter-spacing: -0.02em;
  }

  .logo-subtitle {
    font-size: 0.75rem;
    color: var(--text-tertiary);
    font-weight: 500;
    letter-spacing: 0.05em;
    text-transform: uppercase;
  }

  /* Responsive Logo Adjustments */
  @media (max-width: 768px) {
    .logo-image {
      height: 40px;
      max-width: 150px;
    }
    
    .logo-mark-image {
      height: 40px;
      width: 40px;
    }
    
    .logo-subtitle {
      display: none; /* Hide subtitle on mobile to save space */
    }
    
    .logo-title {
      font-size: 1rem;
    }
  }

  @media (max-width: 480px) {
    .logo-image {
      height: 36px;
      max-width: 120px;
    }
    
    .logo-mark-image {
      height: 36px;
      width: 36px;
    }
    
    .logo-text {
      display: none; /* Hide all text on very small screens, show only logo */
    }
  }

  /* ==========================================
   LOGO DESIGN - Optimized for Image
   ========================================== */

  .logo {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    cursor: pointer;
    transition: transform var(--transition-base);
  }

  .logo:hover {
    transform: translateY(-2px);
  }

  /* Logo Image - Primary Style */
  .logo-image {
    height: 48px;
    width: auto;
    max-width: 200px;
    object-fit: contain;
    display: block;
    transition: all var(--transition-base);
    border-radius: 10px;
    filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.1));
    
    /* High-quality rendering optimization */
    image-rendering: auto;
    -ms-interpolation-mode: bicubic;
    backface-visibility: hidden;
    transform: translateZ(0);
    will-change: transform;
  }

  .logo:hover .logo-image {
    filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.15));
    transform: translateZ(0) scale(1.02);
  }

  /* Logo with Container Background (Alternative Style) */
  .logo-mark-image {
    height: 48px;
    width: 48px;
    border-radius: var(--radius-md);
    display: grid;
    place-items: center;
    background: white;
    padding: var(--space-1);
    box-shadow: var(--shadow-md);
    position: relative;
    overflow: hidden;
    transition: all var(--transition-base);
  }

  .logo-mark-image img {
    height: 100%;
    width: 100%;
    object-fit: contain;
    image-rendering: auto;
    backface-visibility: hidden;
  }

  .logo-mark-image::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, transparent, rgba(255,255,255,0.2));
    opacity: 0;
    transition: opacity var(--transition-base);
  }

  .logo:hover .logo-mark-image::before {
    opacity: 1;
  }

  .logo:hover .logo-mark-image {
    transform: scale(1.05);
    box-shadow: var(--shadow-lg);
  }

  /* Logo Text Styles */
  .logo-text {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .logo-title {
    font-family: var(--font-display);
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--text-primary);
    letter-spacing: -0.02em;
    line-height: 1.2;
  }

  .logo-subtitle {
    font-size: 0.75rem;
    color: var(--text-tertiary);
    font-weight: 500;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    line-height: 1;
  }

  /* Responsive Logo */
  @media (max-width: 768px) {
    .logo-image {
      height: 40px;
      max-width: 150px;
    }
    
    .logo-mark-image {
      height: 40px;
      width: 40px;
    }
    
    .logo-subtitle {
      display: none;
    }
    
    .logo-title {
      font-size: 1rem;
    }
  }

  @media (max-width: 480px) {
    .logo-image {
      height: 36px;
      max-width: 120px;
    }
    
    .logo-mark-image {
      height: 36px;
      width: 36px;
    }
    
    .logo-text {
      display: none;
    }
  }

  /* ==========================================
    FOOTER LOGO
    ========================================== */

  .footer-logo {
    display: flex;
    align-items: center;
    gap: var(--space-3);
  }

  .footer-logo-image {
    height: 48px;
    width: auto;
    max-width: 200px;
    object-fit: contain;
    border-radius: 10px;
    
    /* Optimization */
    image-rendering: auto;
    -ms-interpolation-mode: bicubic;
    backface-visibility: hidden;
    transform: translateZ(0);
  }

  .footer-logo-mark-image {
    height: 48px;
    width: 48px;
    border-radius: var(--radius-md);
    display: grid;
    place-items: center;
    background: var(--gradient-primary);
    padding: var(--space-1);
  }

  .footer-logo-mark-image img {
    height: 100%;
    width: 100%;
    object-fit: contain;
    image-rendering: auto;
    backface-visibility: hidden;
  }

  .footer-logo-text {
    font-family: var(--font-display);
    font-size: 1.125rem;
    font-weight: 700;
    color: white;
  }

  /* Navigation Links */
  .nav-links {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    list-style: none;
  }
  
  .nav-link {
    padding: var(--space-2) var(--space-4);
    color: var(--text-secondary);
    font-weight: 500;
    font-size: 0.9375rem;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
    cursor: pointer;
  }
  
  .nav-link:hover {
    color: var(--text-primary);
    background: var(--gray-100);
  }
  
  .nav-link.active {
    color: var(--primary-600);
    background: var(--primary-50);
  }
  
  /* Navigation Actions */
  .nav-actions {
    display: flex;
    align-items: center;
    gap: var(--space-3);
  }

  /* Mobile menu toggle */
  .mobile-menu-toggle {
    display: none;
    background: none;
    border: none;
    padding: var(--space-2);
    cursor: pointer;
    color: var(--text-primary);
  }
  
  @media (max-width: 768px) {
    .nav-links {
      display: none;
    }
    .mobile-menu-toggle {
      display: block;
    }
    .logo-subtitle {
      display: none;
    }
  }

  /* ==========================================
     BUTTON SYSTEM - Professional & Versatile
     ========================================== */
  
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-5);
    font-family: var(--font-sans);
    font-size: 0.9375rem;
    font-weight: 600;
    line-height: 1;
    border: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition-base);
    white-space: nowrap;
    text-decoration: none;
    position: relative;
    overflow: hidden;
  }
  
  .btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, transparent, rgba(255,255,255,0.2));
    opacity: 0;
    transition: opacity var(--transition-base);
  }
  
  .btn:hover::before {
    opacity: 1;
  }
  
  .btn:active {
    transform: scale(0.98);
  }
  
  .btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
  
  /* Button variants */
  .btn-primary {
    background: var(--gradient-primary);
    color: white;
    box-shadow: var(--shadow-md);
  }
  
  .btn-primary:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-2px);
  }
  
  .btn-secondary {
    background: var(--gray-100);
    color: var(--text-primary);
  }
  
  .btn-secondary:hover {
    background: var(--gray-200);
  }
  
  .btn-outline {
    background: transparent;
    border: 2px solid var(--gray-300);
    color: var(--text-primary);
  }
  
  .btn-outline:hover {
    border-color: var(--primary-600);
    color: var(--primary-600);
    background: var(--primary-50);
  }
  
  .btn-ghost {
    background: transparent;
    color: var(--text-secondary);
  }
  
  .btn-ghost:hover {
    background: var(--gray-100);
    color: var(--text-primary);
  }
  
  /* Button sizes */
  .btn-sm {
    padding: var(--space-2) var(--space-3);
    font-size: 0.875rem;
  }
  
  .btn-lg {
    padding: var(--space-4) var(--space-8);
    font-size: 1.125rem;
  }
  
  .btn-icon {
    padding: var(--space-3);
    aspect-ratio: 1;
  }

  #heroWatchBtn svg {
    width: 26px;
    height: 26px;
  }


  /* ==========================================
     HERO SECTION - Stunning First Impression
     ========================================== */
  
  .hero {
    position: relative;
    padding: var(--space-24) 0 var(--space-20);
    overflow: hidden;
  }
  
  /* Animated background elements */
  .hero::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -20%;
    width: 800px;
    height: 800px;
    background: radial-gradient(circle, rgba(102, 126, 234, 0.15), transparent 70%);
    border-radius: 50%;
    animation: float 20s ease-in-out infinite;
  }
  
  .hero::after {
    content: '';
    position: absolute;
    bottom: -30%;
    left: -10%;
    width: 600px;
    height: 600px;
    background: radial-gradient(circle, rgba(118, 75, 162, 0.1), transparent 70%);
    border-radius: 50%;
    animation: float 15s ease-in-out infinite reverse;
  }
  
  @keyframes float {
    0%, 100% { transform: translate(0, 0) scale(1); }
    33% { transform: translate(30px, -30px) scale(1.1); }
    66% { transform: translate(-20px, 20px) scale(0.9); }
  }
  
  .hero-content {
    position: relative;
    z-index: var(--z-base);
    display: grid;
    grid-template-columns: 1.2fr 1fr;
    gap: var(--space-12);
    align-items: center;
  }
  
  @media (max-width: 968px) {
    .hero-content {
      grid-template-columns: 1fr;
      gap: var(--space-8);
    }
  }
  
  /* Hero Left - Text Content */
  .hero-left {
    animation: slideInLeft 0.8s ease-out;
  }
  
  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-30px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-4);
    background: var(--primary-50);
    border: 1px solid var(--primary-200);
    border-radius: var(--radius-full);
    color: var(--primary-700);
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: var(--space-6);
    animation: bounce 2s ease-in-out infinite;
  }
  
  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
  }
  
  .hero-badge .badge-dot {
    width: 8px;
    height: 8px;
    background: var(--success-500);
    border-radius: 50%;
    animation: pulse 2s ease-in-out infinite;
  }
  
  @keyframes pulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(1.2); }
  }
  
  .hero h1 {
    margin-bottom: var(--space-6);
    line-height: 1.1;
  }
  
  .hero-description {
    font-size: 1.25rem;
    color: var(--text-secondary);
    margin-bottom: var(--space-8);
    max-width: 600px;
    line-height: 1.6;
  }
  
  /* Hero CTA Buttons */
  .hero-cta {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    flex-wrap: wrap;
    margin-bottom: var(--space-8);
  }
  
  /* Hero Stats */
  .hero-stats {
    display: flex;
    align-items: center;
    gap: var(--space-8);
    padding-top: var(--space-6);
    border-top: 1px solid var(--gray-200);
  }
  
  .hero-stat {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
  }
  
  .hero-stat-value {
    font-size: 1.875rem;
    font-weight: 800;
    font-family: var(--font-display);
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  
  .hero-stat-label {
    font-size: 0.875rem;
    color: var(--text-tertiary);
    font-weight: 500;
  }
  
  @media (max-width: 640px) {
    .hero-cta {
      flex-direction: column;
      width: 100%;
    }
    .hero-cta .btn {
      width: 100%;
    }
    .hero-stats {
      gap: var(--space-4);
    }
  }

  /* Hero Right - Visual Element */
  .hero-right {
    position: relative;
    animation: slideInRight 0.8s ease-out;
  }
  
  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(30px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  .hero-visual {
    position: relative;
    background: white;
    border-radius: var(--radius-2xl);
    padding: var(--space-8);
    box-shadow: var(--shadow-2xl);
    border: 1px solid var(--gray-200);
  }
  
  .hero-visual::before {
    content: '';
    position: absolute;
    inset: -2px;
    background: var(--gradient-primary);
    border-radius: var(--radius-2xl);
    opacity: 0.1;
    z-index: -1;
  }

    /* ==========================================
     HERO VISUAL CARDS - Interactive Preview
     ========================================== */
  
  .preview-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-4);
    margin-bottom: var(--space-4);
  }
  
  .preview-card {
    background: linear-gradient(135deg, var(--gray-50), white);
    padding: var(--space-5);
    border-radius: var(--radius-lg);
    border: 1px solid var(--gray-200);
    transition: all var(--transition-base);
    cursor: pointer;
  }
  
  .preview-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
    border-color: var(--primary-300);
  }
  
  .preview-card-icon {
    width: 40px;
    height: 40px;
    border-radius: var(--radius-md);
    background: var(--gradient-primary);
    display: grid;
    place-items: center;
    font-size: 1.25rem;
    margin-bottom: var(--space-3);
  }
  
  .preview-card-title {
    font-size: 1rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: var(--space-2);
  }
  
  .preview-card-desc {
    font-size: 0.875rem;
    color: var(--text-tertiary);
    line-height: 1.5;
  }
  
  .preview-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-4);
    background: var(--primary-50);
    border-radius: var(--radius-md);
    border: 1px dashed var(--primary-200);
  }
  
  .preview-footer-text {
    font-size: 0.8125rem;
    color: var(--primary-700);
    font-weight: 600;
  }
  
  .preview-footer-icon {
    color: var(--primary-600);
    animation: bounce 2s ease-in-out infinite;
  }

  /* ==========================================
     FEATURES SECTION - Showcase Key Points
     ========================================== */
  
  .features-section {
    background: linear-gradient(180deg, white, var(--gray-50));
    position: relative;
  }
  
  .section-header {
    text-align: center;
    max-width: 800px;
    margin: 0 auto var(--space-16);
  }
  
  .section-badge {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-4);
    background: var(--accent-50);
    border: 1px solid var(--accent-400);
    border-radius: var(--radius-full);
    color: var(--accent-600);
    font-size: 0.875rem;
    font-weight: 700;
    margin-bottom: var(--space-4);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
  
  .section-title {
    margin-bottom: var(--space-4);
  }
  
  .section-description {
    font-size: 1.125rem;
    color: var(--text-secondary);
    line-height: 1.7;
  }
  
  /* Feature Grid */
  .features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: var(--space-6);
  }
  
  .feature-card {
    background: white;
    padding: var(--space-8);
    border-radius: var(--radius-xl);
    border: 1px solid var(--gray-200);
    box-shadow: var(--shadow-sm);
    transition: all var(--transition-slow);
    position: relative;
    overflow: hidden;
  }
  
  .feature-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 4px;
    background: var(--gradient-primary);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform var(--transition-slow);
  }
  
  .feature-card:hover::before {
    transform: scaleX(1);
  }
  
  .feature-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-xl);
    border-color: var(--primary-200);
  }
  
  .feature-icon {
    width: 64px;
    height: 64px;
    border-radius: var(--radius-lg);
    background: var(--gradient-primary);
    display: grid;
    place-items: center;
    font-size: 2rem;
    margin-bottom: var(--space-5);
    position: relative;
    box-shadow: var(--shadow-md);
  }
  
  .feature-icon::after {
    content: '';
    position: absolute;
    inset: -4px;
    border-radius: var(--radius-lg);
    background: inherit;
    opacity: 0.3;
    filter: blur(12px);
    z-index: -1;
  }
  
  .feature-card h3 {
    font-size: 1.5rem;
    margin-bottom: var(--space-3);
    color: var(--text-primary);
  }
  
  .feature-card p {
    font-size: 1rem;
    color: var(--text-secondary);
    line-height: 1.7;
    margin-bottom: var(--space-4);
  }
  
  .feature-list {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
  }
  
  .feature-list li {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    font-size: 0.9375rem;
    color: var(--text-secondary);
  }
  
  .feature-list li::before {
    content: '✓';
    display: grid;
    place-items: center;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--success-500);
    color: white;
    font-weight: 700;
    flex-shrink: 0;
  }

  /* ==========================================
     CHAPTERS SECTION - Premium Card Design
     ========================================== */
  
  .chapters-section {
    background: white;
    position: relative;
  }
  
  .chapters-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-8);
    gap: var(--space-4);
    flex-wrap: wrap;
  }
  
  .chapters-header h2 {
    margin: 0;
  }
  
  .chapters-filter {
    display: flex;
    gap: var(--space-2);
    background: var(--gray-100);
    padding: var(--space-1);
    border-radius: var(--radius-md);
  }
  
  .filter-btn {
    padding: var(--space-2) var(--space-4);
    background: transparent;
    border: none;
    border-radius: var(--radius-sm);
    font-weight: 600;
    font-size: 0.875rem;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all var(--transition-fast);
  }
  
  .filter-btn:hover {
    color: var(--text-primary);
  }
  
  .filter-btn.active {
    background: white;
    color: var(--primary-600);
    box-shadow: var(--shadow-sm);
  }
  
  /* Chapter Cards Grid */
  .chapters-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    gap: var(--space-6);
  }
  
  @media (max-width: 640px) {
    .chapters-grid {
      grid-template-columns: 1fr;
    }
  }
  
  /* Individual Chapter Card */
  .chapter-card {
    background: white;
    border: 2px solid var(--gray-200);
    border-radius: var(--radius-xl);
    overflow: hidden;
    transition: all var(--transition-base);
    position: relative;
    cursor: pointer;
  }
  
  .chapter-card:hover {
    transform: translateY(-6px);
    box-shadow: var(--shadow-2xl);
    border-color: var(--primary-300);
  }
  
  .chapter-card.locked {
    opacity: 0.7;
    cursor: not-allowed;
  }
  
  .chapter-card.locked:hover {
    transform: none;
    box-shadow: none;
  }
  
  .chapter-card.completed {
    border-color: var(--success-400);
  }
  
  /* Chapter Header with Image */
  .chapter-header {
    position: relative;
    height: 180px;
    background: var(--gradient-primary);
    overflow: hidden;
  }
  
  .chapter-header::before {
    content: '';
    position: absolute;
    inset: 0;
    background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    opacity: 0.3;
  }
  
  .chapter-number {
    position: absolute;
    top: var(--space-4);
    left: var(--space-4);
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(8px);
    color: white;
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-md);
    font-weight: 700;
    font-size: 0.875rem;
    font-family: var(--font-mono);
  }
  
  .chapter-status {
    position: absolute;
    top: var(--space-4);
    right: var(--space-4);
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-full);
    font-weight: 700;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
  
  .chapter-status.unlocked {
    background: var(--success-500);
    color: white;
  }
  
  .chapter-status.locked {
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(8px);
    color: white;
  }
  
  .chapter-status.completed {
    background: var(--accent-500);
    color: white;
  }
  
  .chapter-icon {
    position: absolute;
    bottom: -30px;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 80px;
    border-radius: var(--radius-xl);
    background: white;
    border: 4px solid white;
    box-shadow: var(--shadow-xl);
    display: grid;
    place-items: center;
    font-size: 2.5rem;
  }
  
  /* Chapter Body */
  .chapter-body {
    padding: var(--space-8) var(--space-6) var(--space-6);
  }
  
  .chapter-title {
    font-size: 1.375rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: var(--space-3);
    text-align: center;
  }
  
  .chapter-description {
    font-size: 0.9375rem;
    color: var(--text-secondary);
    line-height: 1.6;
    text-align: center;
    margin-bottom: var(--space-5);
  }
  
  /* Chapter Meta */
  .chapter-meta {
    display: flex;
    justify-content: space-around;
    padding: var(--space-4) 0;
    border-top: 1px solid var(--gray-200);
    border-bottom: 1px solid var(--gray-200);
    margin-bottom: var(--space-5);
  }
  
  .chapter-meta-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-1);
  }
  
  .chapter-meta-label {
    font-size: 0.75rem;
    color: var(--text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-weight: 600;
  }
  
  .chapter-meta-value {
    font-size: 0.875rem;
    color: var(--text-primary);
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: var(--space-1);
  }
  
  /* Difficulty indicator */
  .difficulty {
    display: flex;
    gap: 2px;
  }
  
  .difficulty-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--gray-300);
  }
  
  .difficulty-dot.active {
    background: var(--primary-500);
  }
  
  /* Chapter Footer */
  .chapter-footer {
    display: flex;
    gap: var(--space-3);
  }
  
  .chapter-footer .btn {
    flex: 1;
  }
  
  /* Progress bar for chapters */
  .chapter-progress {
    margin-top: var(--space-4);
  }
  
  .progress-label {
    display: flex;
    justify-content: space-between;
    margin-bottom: var(--space-2);
    font-size: 0.875rem;
    color: var(--text-secondary);
  }
  
  .progress-bar {
    height: 8px;
    background: var(--gray-200);
    border-radius: var(--radius-full);
    overflow: hidden;
  }
  
  .progress-fill {
    height: 100%;
    background: var(--gradient-primary);
    border-radius: var(--radius-full);
    transition: width var(--transition-slow);
  }

  /* ==========================================
     HOW IT WORKS - Step-by-step Guide
     ========================================== */
  
  .how-it-works-section {
    background: linear-gradient(180deg, var(--gray-50), white);
    position: relative;
    overflow: hidden;
  }
  
  .steps-container {
    position: relative;
    max-width: 1000px;
    margin: 0 auto;
  }
  
  /* Connecting line between steps */
  .steps-line {
    position: absolute;
    left: 50%;
    top: 80px;
    bottom: 80px;
    width: 2px;
    background: linear-gradient(180deg, var(--primary-200), var(--primary-400), var(--primary-200));
    transform: translateX(-50%);
    z-index: 0;
  }
  
  @media (max-width: 768px) {
    .steps-line {
      left: 40px;
    }
  }
  
  .steps-grid {
    display: flex;
    flex-direction: column;
    gap: var(--space-12);
    position: relative;
    z-index: 1;
  }
  
  /* Individual Step */
  .step {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-8);
    align-items: center;
  }
  
  .step:nth-child(even) {
    direction: rtl;
  }
  
  .step:nth-child(even) > * {
    direction: ltr;
  }
  
  @media (max-width: 768px) {
    .step {
      grid-template-columns: 1fr;
      direction: ltr !important;
    }
  }
  
  .step-number-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
  }
  
  .step-number {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: var(--gradient-primary);
    color: white;
    display: grid;
    place-items: center;
    font-size: 2rem;
    font-weight: 800;
    font-family: var(--font-display);
    box-shadow: var(--shadow-xl);
    position: relative;
    z-index: 2;
  }
  
  .step-number::before {
    content: '';
    position: absolute;
    inset: -8px;
    border-radius: 50%;
    background: inherit;
    opacity: 0.3;
    filter: blur(20px);
    z-index: -1;
  }
  
  .step-content {
    background: white;
    padding: var(--space-8);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-lg);
    border: 1px solid var(--gray-200);
  }
  
  .step-content h3 {
    font-size: 1.75rem;
    margin-bottom: var(--space-3);
    color: var(--text-primary);
  }
  
  .step-content p {
    font-size: 1.0625rem;
    color: var(--text-secondary);
    line-height: 1.7;
    margin-bottom: var(--space-4);
  }
  
  .step-features {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
  }
  
  .step-features li {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: 0.9375rem;
    color: var(--text-secondary);
  }
  
  .step-features li::before {
    content: '→';
    color: var(--primary-600);
    font-weight: 700;
  }

  /* ==========================================
     TESTIMONIALS / SOCIAL PROOF
     ========================================== */
  
  .testimonials-section {
    background: white;
    position: relative;
  }
  
  .testimonials-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: var(--space-6);
  }
  
  .testimonial-card {
    background: linear-gradient(135deg, var(--primary-50), white);
    padding: var(--space-8);
    border-radius: var(--radius-xl);
    border: 1px solid var(--primary-100);
    box-shadow: var(--shadow-md);
    transition: all var(--transition-base);
    position: relative;
  }
  
  .testimonial-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-xl);
  }
  
  .testimonial-quote {
    font-size: 3rem;
    color: var(--primary-300);
    line-height: 1;
    margin-bottom: var(--space-4);
    font-family: Georgia, serif;
  }
  
  .testimonial-text {
    font-size: 1.0625rem;
    color: var(--text-secondary);
    line-height: 1.7;
    margin-bottom: var(--space-6);
    font-style: italic;
  }
  
  .testimonial-author {
    display: flex;
    align-items: center;
    gap: var(--space-4);
  }
  
  .testimonial-avatar {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: var(--gradient-primary);
    display: grid;
    place-items: center;
    color: white;
    font-weight: 700;
    font-size: 1.25rem;
  }
  
  .testimonial-info {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
  }
  
  .testimonial-name {
    font-weight: 700;
    color: var(--text-primary);
  }
  
  .testimonial-role {
    font-size: 0.875rem;
    color: var(--text-tertiary);
  }
  
  .testimonial-rating {
    margin-top: var(--space-3);
    display: flex;
    gap: var(--space-1);
    color: var(--accent-500);
  }

  /* ==========================================
     STATS / COUNTER SECTION
     ========================================== */
  
  .stats-section {
    background: var(--gradient-primary);
    color: white;
    position: relative;
    overflow: hidden;
  }
  
  .stats-section::before {
    content: '';
    position: absolute;
    inset: 0;
    background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
  }
  
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-8);
    position: relative;
    z-index: 1;
  }
  
  .stat-item {
    text-align: center;
    padding: var(--space-6);
  }
  
  .stat-value {
    font-size: 3.5rem;
    font-weight: 800;
    font-family: var(--font-display);
    line-height: 1;
    margin-bottom: var(--space-3);
    display: block;
  }
  
  .stat-label {
    font-size: 1.125rem;
    opacity: 0.9;
    font-weight: 500;
  }
  
  .stat-sublabel {
    font-size: 0.875rem;
    opacity: 0.7;
    margin-top: var(--space-2);
  }

  /* ==========================================
     CTA SECTION - Final Call to Action
     ========================================== */
  
  .cta-section {
    background: linear-gradient(135deg, var(--primary-900), var(--primary-700));
    color: white;
    position: relative;
    overflow: hidden;
  }
  
  .cta-section::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -20%;
    width: 600px;
    height: 600px;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.1), transparent 70%);
    border-radius: 50%;
  }
  
  .cta-content {
    text-align: center;
    max-width: 800px;
    margin: 0 auto;
    position: relative;
    z-index: 1;
  }
  
  .cta-content h2 {
    color: white;
    margin-bottom: var(--space-4);
  }
  
  .cta-content p {
    font-size: 1.25rem;
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: var(--space-8);
  }
  
  .cta-buttons {
    display: flex;
    justify-content: center;
    gap: var(--space-4);
    flex-wrap: wrap;
  }
  
  .btn-white {
    background: white;
    color: var(--primary-700);
  }
  
  .btn-white:hover {
    background: var(--gray-100);
    transform: translateY(-2px);
    box-shadow: var(--shadow-xl);
  }
  
  .btn-outline-white {
    background: transparent;
    border: 2px solid white;
    color: white;
  }
  
  .btn-outline-white:hover {
    background: rgba(255, 255, 255, 0.1);
  }

  /* ==========================================
     FOOTER - Professional & Informative
     ========================================== */
  
  footer {
    background: var(--gray-900);
    color: var(--gray-400);
    padding: var(--space-16) 0 var(--space-8);
  }
  
  .footer-content {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr;
    gap: var(--space-12);
    margin-bottom: var(--space-12);
  }
  
  @media (max-width: 968px) {
    .footer-content {
      grid-template-columns: 1fr 1fr;
      gap: var(--space-8);
    }
  }
  
  @media (max-width: 640px) {
    .footer-content {
      grid-template-columns: 1fr;
      gap: var(--space-6);
    }
  }
  
  .footer-brand {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
  }
  
  .footer-description {
    font-size: 0.9375rem;
    line-height: 1.6;
    color: var(--gray-500);
  }
  
  .footer-social {
    display: flex;
    gap: var(--space-3);
    margin-top: var(--space-4);
  }
  
  .social-link {
    width: 40px;
    height: 40px;
    border-radius: var(--radius-md);
    background: var(--gray-800);
    display: grid;
    place-items: center;
    color: var(--gray-400);
    transition: all var(--transition-base);
  }
  
  .social-link:hover {
    background: var(--primary-600);
    color: white;
    transform: translateY(-2px);
  }
  
  .footer-links-group h4 {
    font-size: 0.875rem;
    font-weight: 700;
    color: white;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: var(--space-4);
  }
  
  .footer-links {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
  }
  
  .footer-links a {
    color: var(--gray-500);
    font-size: 0.9375rem;
    transition: color var(--transition-fast);
  }
  
  .footer-links a:hover {
    color: var(--primary-400);
  }
  
  .footer-bottom {
    padding-top: var(--space-8);
    border-top: 1px solid var(--gray-800);
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--space-4);
    flex-wrap: wrap;
  }
  
  .footer-bottom-links {
    display: flex;
    gap: var(--space-6);
    list-style: none;
  }
  
  .footer-bottom-links a {
    color: var(--gray-500);
    font-size: 0.875rem;
  }
  
  .footer-bottom-links a:hover {
    color: var(--gray-300);
  }

  /* ==========================================
     MODAL SYSTEM - Professional Overlays
     ========================================== */
  
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(8px);
    z-index: var(--z-modal-backdrop);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-6);
    opacity: 0;
    visibility: hidden;
    transition: all var(--transition-base);
  }
  
  .modal-overlay.active {
    opacity: 1;
    visibility: visible;
  }
  
  .modal-overlay.active .modal {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
  
  .modal {
    background: white;
    border-radius: var(--radius-2xl);
    box-shadow: var(--shadow-2xl);
    width: 100%;
    max-width: 480px;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    transform: translateY(20px) scale(0.95);
    opacity: 0;
    transition: all var(--transition-slow);
  }
  
  .modal-header {
    padding: var(--space-8);
    padding-bottom: var(--space-6);
    border-bottom: 1px solid var(--gray-200);
    position: relative;
  }
  
  .modal-close {
    position: absolute;
    top: var(--space-6);
    right: var(--space-6);
    width: 40px;
    height: 40px;
    border-radius: var(--radius-md);
    background: var(--gray-100);
    border: none;
    display: grid;
    place-items: center;
    cursor: pointer;
    transition: all var(--transition-fast);
    color: var(--text-secondary);
  }
  
  .modal-close:hover {
    background: var(--gray-200);
    color: var(--text-primary);
    transform: rotate(90deg);
  }
  
  .modal-title {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0;
    padding-right: var(--space-12);
  }
  
  .modal-subtitle {
    font-size: 0.9375rem;
    color: var(--text-secondary);
    margin-top: var(--space-2);
  }
  
  .modal-body {
    padding: var(--space-8);
  }
  
  .modal-footer {
    padding: var(--space-6) var(--space-8);
    border-top: 1px solid var(--gray-200);
    background: var(--gray-50);
    border-radius: 0 0 var(--radius-2xl) var(--radius-2xl);
  }

  /* ==========================================
     FORM SYSTEM - Beautiful Input Fields
     ========================================== */
  
  .form-group {
    margin-bottom: var(--space-6);
  }
  
  .form-label {
    display: block;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--space-2);
  }
  
  .form-label-required::after {
    content: '*';
    color: var(--primary-600);
    margin-left: var(--space-1);
  }
  
  .form-input,
  .form-textarea,
  .form-select {
    width: 100%;
    padding: var(--space-3) var(--space-4);
    font-size: 0.9375rem;
    font-family: var(--font-sans);
    color: var(--text-primary);
    background: white;
    border: 2px solid var(--gray-300);
    border-radius: var(--radius-md);
    transition: all var(--transition-fast);
    outline: none;
  }
  
  .form-input:focus,
  .form-textarea:focus,
  .form-select:focus {
    border-color: var(--primary-500);
    box-shadow: 0 0 0 4px var(--primary-100);
  }
  
  .form-input::placeholder {
    color: var(--gray-400);
  }
  
  .form-input:disabled {
    background: var(--gray-100);
    cursor: not-allowed;
    opacity: 0.6;
  }
  
  .form-input.error {
    border-color: #ef4444;
  }
  
  .form-input.error:focus {
    box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.1);
  }
  
  .form-input.success {
    border-color: var(--success-500);
  }
  
  .form-textarea {
    min-height: 120px;
    resize: vertical;
  }
  
  .form-helper {
    font-size: 0.8125rem;
    color: var(--text-tertiary);
    margin-top: var(--space-2);
  }
  
  .form-error {
    font-size: 0.8125rem;
    color: #ef4444;
    margin-top: var(--space-2);
    display: flex;
    align-items: center;
    gap: var(--space-1);
  }
  
  .form-error::before {
    content: '⚠';
  }
  
  .form-success {
    font-size: 0.8125rem;
    color: var(--success-600);
    margin-top: var(--space-2);
    display: flex;
    align-items: center;
    gap: var(--space-1);
  }
  
  .form-success::before {
    content: '✓';
  }
  
  /* Input with icon */
  .form-input-group {
    position: relative;
  }
  
  .form-input-icon {
    position: absolute;
    left: var(--space-4);
    top: 50%;
    transform: translateY(-50%);
    color: var(--gray-400);
    pointer-events: none;
  }
  
  .form-input-group .form-input {
    padding-left: var(--space-12);
  }
  
  .form-input-action {
    position: absolute;
    right: var(--space-2);
    top: 50%;
    transform: translateY(-50%);
  }
  
  /* Checkbox & Radio */
  .form-check {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    cursor: pointer;
  }
  
  .form-check input[type="checkbox"],
  .form-check input[type="radio"] {
    width: 20px;
    height: 20px;
    cursor: pointer;
    accent-color: var(--primary-600);
  }
  
  .form-check-label {
    font-size: 0.9375rem;
    color: var(--text-secondary);
    cursor: pointer;
  }

  /* ==========================================
     AUTHENTICATION MODALS - Specific Styles
     ========================================== */
  
  .auth-modal .modal {
    max-width: 440px;
  }
  
  .auth-divider {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    margin: var(--space-6) 0;
    color: var(--text-tertiary);
    font-size: 0.875rem;
  }
  
  .auth-divider::before,
  .auth-divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--gray-300);
  }
  
  .social-login-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-3);
    margin-bottom: var(--space-6);
  }
  
  .btn-social {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-3);
    border: 2px solid var(--gray-300);
    border-radius: var(--radius-md);
    background: white;
    color: var(--text-primary);
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
  }
  
  .btn-social:hover {
    border-color: var(--gray-400);
    background: var(--gray-50);
  }
  
  .btn-social svg,
  .btn-social img {
    width: 20px;
    height: 20px;
  }
  
  .auth-footer-text {
    text-align: center;
    font-size: 0.9375rem;
    color: var(--text-secondary);
  }
  
  .auth-footer-text a {
    color: var(--primary-600);
    font-weight: 600;
  }
  
  .auth-footer-text a:hover {
    text-decoration: underline;
  }
  
  .password-strength {
    margin-top: var(--space-3);
  }
  
  .password-strength-bar {
    height: 4px;
    background: var(--gray-200);
    border-radius: var(--radius-full);
    overflow: hidden;
    margin-bottom: var(--space-2);
  }
  
  .password-strength-fill {
    height: 100%;
    border-radius: var(--radius-full);
    transition: all var(--transition-base);
  }
  
  .password-strength-fill.weak {
    width: 33%;
    background: #ef4444;
  }
  
  .password-strength-fill.medium {
    width: 66%;
    background: var(--accent-500);
  }
  
  .password-strength-fill.strong {
    width: 100%;
    background: var(--success-500);
  }
  
  .password-strength-label {
    font-size: 0.8125rem;
    font-weight: 600;
  }
  
  .password-strength-label.weak {
    color: #ef4444;
  }
  
  .password-strength-label.medium {
    color: var(--accent-600);
  }
  
  .password-strength-label.strong {
    color: var(--success-600);
  }

  /* ==========================================
     TOAST NOTIFICATIONS - User Feedback
     ========================================== */
  
  .toast-container {
    position: fixed;
    bottom: var(--space-6);
    right: var(--space-6);
    z-index: var(--z-tooltip);
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    max-width: 400px;
  }
  
  @media (max-width: 640px) {
    .toast-container {
      left: var(--space-4);
      right: var(--space-4);
      bottom: var(--space-4);
      max-width: none;
    }
  }
  
  .toast {
    background: var(--gray-900);
    color: white;
    padding: var(--space-4) var(--space-5);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-2xl);
    display: flex;
    align-items: center;
    gap: var(--space-3);
    animation: slideInUp var(--transition-base);
    position: relative;
    overflow: hidden;
  }
  
  @keyframes slideInUp {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
  
  .toast.removing {
    animation: slideOutDown var(--transition-base);
  }
  
  @keyframes slideOutDown {
    to {
      transform: translateY(100%);
      opacity: 0;
    }
  }
  
  .toast-icon {
    width: 24px;
    height: 24px;
    flex-shrink: 0;
    display: grid;
    place-items: center;
  }
  
  .toast-content {
    flex: 1;
  }
  
  .toast-title {
    font-weight: 600;
    font-size: 0.9375rem;
    margin-bottom: var(--space-1);
  }
  
  .toast-message {
    font-size: 0.875rem;
    opacity: 0.9;
  }
  
  .toast-close {
    background: none;
    border: none;
    color: white;
    cursor: pointer;
    padding: var(--space-1);
    opacity: 0.7;
    transition: opacity var(--transition-fast);
  }
  
  .toast-close:hover {
    opacity: 1;
  }
  
  .toast-progress {
    position: absolute;
    bottom: 0;
    left: 0;
    height: 3px;
    background: rgba(255, 255, 255, 0.3);
    animation: toastProgress 3s linear;
  }
  
  @keyframes toastProgress {
    from { width: 100%; }
    to { width: 0%; }
  }
  
  /* Toast variants */
  .toast.success {
    background: var(--success-600);
  }
  
  .toast.error {
    background: #ef4444;
  }
  
  .toast.warning {
    background: var(--accent-600);
  }
  
  .toast.info {
    background: var(--primary-600);
  }

  /* ==========================================
     LOADING STATES - Spinners & Skeletons
     ========================================== */
  
  .spinner {
    width: 40px;
    height: 40px;
    border: 4px solid var(--gray-200);
    border-top-color: var(--primary-600);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
  }
  
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
  
  .spinner-sm {
    width: 20px;
    height: 20px;
    border-width: 2px;
  }
  
  .spinner-lg {
    width: 60px;
    height: 60px;
    border-width: 6px;
  }
  
  .loading-overlay {
    position: fixed;
    inset: 0;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(4px);
    z-index: var(--z-modal);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: var(--space-4);
  }
  
  .loading-text {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-primary);
  }
  
  /* Skeleton loaders */
  .skeleton {
    background: linear-gradient(
      90deg,
      var(--gray-200) 25%,
      var(--gray-300) 50%,
      var(--gray-200) 75%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: var(--radius-md);
  }
  
  @keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }
  
  .skeleton-text {
    height: 1em;
    margin-bottom: var(--space-2);
  }
  
  .skeleton-title {
    height: 2em;
    width: 60%;
    margin-bottom: var(--space-3);
  }
  
  .skeleton-avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
  }
  
  .skeleton-card {
    height: 200px;
  }

  /* ==========================================
     BADGES & PILLS - Status Indicators
     ========================================== */
  
  .badge {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-3);
    font-size: 0.8125rem;
    font-weight: 600;
    border-radius: var(--radius-full);
    white-space: nowrap;
  }
  
  .badge-sm {
    padding: 2px var(--space-2);
    font-size: 0.75rem;
  }
  
  .badge-lg {
    padding: var(--space-2) var(--space-4);
    font-size: 0.875rem;
  }
  
  .badge-primary {
    background: var(--primary-100);
    color: var(--primary-700);
  }
  
  .badge-success {
    background: #dcfce7;
    color: var(--success-700);
  }
  
  .badge-warning {
    background: var(--accent-100);
    color: var(--accent-700);
  }
  
  .badge-error {
    background: #fee2e2;
    color: #991b1b;
  }
  
  .badge-info {
    background: #dbeafe;
    color: #1e40af;
  }
  
  .badge-neutral {
    background: var(--gray-100);
    color: var(--gray-700);
  }
  
  .badge-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: currentColor;
  }

  /* ==========================================
     TOOLTIPS - Helpful Hints
     ========================================== */
  
  .tooltip-wrapper {
    position: relative;
    display: inline-block;
  }
  
  .tooltip {
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%);
    background: var(--gray-900);
    color: white;
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-md);
    font-size: 0.8125rem;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: all var(--transition-fast);
    pointer-events: none;
    z-index: var(--z-tooltip);
  }
  
  .tooltip::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 4px solid transparent;
    border-top-color: var(--gray-900);
  }
  
  .tooltip-wrapper:hover .tooltip {
    opacity: 1;
    visibility: visible;
  }

  /* ==========================================
     DROPDOWN MENUS - Navigation & Actions
     ========================================== */
  
  .dropdown {
    position: relative;
    display: inline-block;
  }
  
  .dropdown-menu {
    position: absolute;
    top: calc(100% + 8px);
    right: 0;
    min-width: 200px;
    background: white;
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-xl);
    padding: var(--space-2);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all var(--transition-base);
    z-index: var(--z-dropdown);
  }
  
  .dropdown.active .dropdown-menu {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }
  
  .dropdown-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-4);
    border-radius: var(--radius-md);
    color: var(--text-primary);
    font-size: 0.9375rem;
    cursor: pointer;
    transition: all var(--transition-fast);
    text-decoration: none;
  }
  
  .dropdown-item:hover {
    background: var(--gray-100);
  }
  
  .dropdown-item.danger {
    color: #ef4444;
  }
  
  .dropdown-item.danger:hover {
    background: #fee2e2;
  }
  
  .dropdown-divider {
    height: 1px;
    background: var(--gray-200);
    margin: var(--space-2) 0;
  }

  /* ==========================================
     TABS - Content Organization
     ========================================== */
  
  .tabs {
    border-bottom: 2px solid var(--gray-200);
  }
  
  .tabs-list {
    display: flex;
    gap: var(--space-2);
    list-style: none;
    margin: 0;
    padding: 0;
  }
  
  .tab-item {
    padding: var(--space-3) var(--space-5);
    font-weight: 600;
    color: var(--text-secondary);
    cursor: pointer;
    border-bottom: 2px solid transparent;
    margin-bottom: -2px;
    transition: all var(--transition-fast);
  }
  
  .tab-item:hover {
    color: var(--text-primary);
  }
  
  .tab-item.active {
    color: var(--primary-600);
    border-bottom-color: var(--primary-600);
  }
  
  .tab-content {
    padding: var(--space-6) 0;
  }
  
  .tab-panel {
    display: none;
  }
  
  .tab-panel.active {
    display: block;
    animation: fadeIn var(--transition-base);
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* ==========================================
     ACCORDION - Expandable Content
     ========================================== */
  
  .accordion {
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    overflow: hidden;
  }
  
  .accordion-item {
    border-bottom: 1px solid var(--gray-200);
  }
  
  .accordion-item:last-child {
    border-bottom: none;
  }
  
  .accordion-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-5);
    cursor: pointer;
    transition: background var(--transition-fast);
  }
  
  .accordion-header:hover {
    background: var(--gray-50);
  }
  
  .accordion-title {
    font-weight: 600;
    color: var(--text-primary);
  }
  
  .accordion-icon {
    transition: transform var(--transition-base);
  }
  
  .accordion-item.active .accordion-icon {
    transform: rotate(180deg);
  }
  
  .accordion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height var(--transition-slow);
  }
  
  .accordion-item.active .accordion-content {
    max-height: 500px;
  }
  
  .accordion-body {
    padding: 0 var(--space-5) var(--space-5);
    color: var(--text-secondary);
    line-height: 1.7;
  }

  /* ==========================================
     ALERTS - Important Messages
     ========================================== */
  
  .alert {
    padding: var(--space-4) var(--space-5);
    border-radius: var(--radius-lg);
    border-left: 4px solid;
    display: flex;
    align-items: start;
    gap: var(--space-3);
  }
  
  .alert-icon {
    flex-shrink: 0;
    width: 24px;
    height: 24px;
  }
  
  .alert-content {
    flex: 1;
  }
  
  .alert-title {
    font-weight: 600;
    margin-bottom: var(--space-1);
  }
  
  .alert-message {
    font-size: 0.9375rem;
    line-height: 1.6;
  }
  
  .alert-success {
    background: #dcfce7;
    border-color: var(--success-500);
    color: var(--success-900);
  }
  
  .alert-error {
    background: #fee2e2;
    border-color: #ef4444;
    color: #991b1b;
  }
  
  .alert-warning {
    background: var(--accent-50);
    border-color: var(--accent-500);
    color: #92400e;
  }
  
  .alert-info {
    background: #dbeafe;
    border-color: #3b82f6;
    color: #1e40af;
  }

  /* ==========================================
     CARDS - Versatile Content Containers
     ========================================== */
  
  .card {
    background: white;
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    overflow: hidden;
    transition: all var(--transition-base);
  }
  
  .card:hover {
    box-shadow: var(--shadow-lg);
  }
  
  .card-header {
    padding: var(--space-5) var(--space-6);
    border-bottom: 1px solid var(--gray-200);
  }
  
  .card-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0;
  }
  
  .card-body {
    padding: var(--space-6);
  }
  
  .card-footer {
    padding: var(--space-5) var(--space-6);
    border-top: 1px solid var(--gray-200);
    background: var(--gray-50);
  }
  
  .card-image {
    width: 100%;
    height: auto;
    display: block;
  }

  /* ==========================================
     AVATAR - User Profile Images
     ========================================== */
  
  .avatar {
    display: inline-block;
    border-radius: 50%;
    overflow: hidden;
    background: var(--gradient-primary);
    color: white;
    font-weight: 700;
  }
  
  .avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  .avatar-xs {
    width: 24px;
    height: 24px;
    font-size: 0.75rem;
  }
  
  .avatar-sm {
    width: 32px;
    height: 32px;
    font-size: 0.875rem;
  }
  
  .avatar-md {
    width: 48px;
    height: 48px;
    font-size: 1.125rem;
  }
  
  .avatar-lg {
    width: 64px;
    height: 64px;
    font-size: 1.5rem;
  }
  
  .avatar-xl {
    width: 96px;
    height: 96px;
    font-size: 2rem;
  }
  
  .avatar-group {
    display: flex;
    align-items: center;
  }
  
  .avatar-group .avatar {
    margin-left: -8px;
    border: 2px solid white;
  }
  
  .avatar-group .avatar:first-child {
    margin-left: 0;
  }

  /* ==========================================
     PROGRESS INDICATORS - Visual Feedback
     ========================================== */
  
  .progress {
    width: 100%;
    height: 8px;
    background: var(--gray-200);
    border-radius: var(--radius-full);
    overflow: hidden;
  }
  
  .progress-bar {
    height: 100%;
    background: var(--gradient-primary);
    border-radius: var(--radius-full);
    transition: width var(--transition-slow);
  }
  
  .progress-lg {
    height: 12px;
  }
  
  .progress-sm {
    height: 4px;
  }
  
  /* Circular progress */
  .progress-circle {
    width: 120px;
    height: 120px;
    position: relative;
  }
  
  .progress-circle svg {
    transform: rotate(-90deg);
  }
  
  .progress-circle-bg {
    fill: none;
    stroke: var(--gray-200);
    stroke-width: 8;
  }
  
  .progress-circle-fill {
    fill: none;
    stroke: url(#gradient);
    stroke-width: 8;
    stroke-linecap: round;
    transition: stroke-dashoffset var(--transition-slow);
  }
  
  .progress-circle-text {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
    font-weight: 700;
    font-size: 1.5rem;
    color: var(--text-primary);
  }

  /* ==========================================
     UTILITY CLASSES - Quick Helpers
     ========================================== */
  
  /* Display */
  .d-none { display: none !important; }
  .d-block { display: block !important; }
  .d-flex { display: flex !important; }
  .d-grid { display: grid !important; }
  .d-inline { display: inline !important; }
  .d-inline-block { display: inline-block !important; }
  
  /* Flex utilities */
  .flex-row { flex-direction: row; }
  .flex-column { flex-direction: column; }
  .justify-start { justify-content: flex-start; }
  .justify-center { justify-content: center; }
  .justify-end { justify-content: flex-end; }
  .justify-between { justify-content: space-between; }
  .justify-around { justify-content: space-around; }
  .align-start { align-items: flex-start; }
  .align-center { align-items: center; }
  .align-end { align-items: flex-end; }
  .flex-wrap { flex-wrap: wrap; }
  .flex-1 { flex: 1; }
  
  /* Spacing */
  .gap-1 { gap: var(--space-1); }
  .gap-2 { gap: var(--space-2); }
  .gap-3 { gap: var(--space-3); }
  .gap-4 { gap: var(--space-4); }
  .gap-6 { gap: var(--space-6); }
  .gap-8 { gap: var(--space-8); }
  
  .m-0 { margin: 0 !important; }
  .mt-4 { margin-top: var(--space-4); }
  .mb-4 { margin-bottom: var(--space-4); }
  .mb-6 { margin-bottom: var(--space-6); }
  .mb-8 { margin-bottom: var(--space-8); }
  
  /* Text alignment */
  .text-left { text-align: left; }
  .text-center { text-align: center; }
  .text-right { text-align: right; }
  
  /* Text utilities */
  .text-sm { font-size: 0.875rem; }
  .text-base { font-size: 1rem; }
  .text-lg { font-size: 1.125rem; }
  .text-xl { font-size: 1.25rem; }
  .font-bold { font-weight: 700; }
  .font-semibold { font-weight: 600; }
  .font-medium { font-weight: 500; }
  .uppercase { text-transform: uppercase; }
  
  /* Colors */
  .text-primary { color: var(--primary-600); }
  .text-secondary { color: var(--text-secondary); }
  .text-muted { color: var(--text-tertiary); }
  .text-success { color: var(--success-600); }
  .text-error { color: #ef4444; }
  .text-white { color: white; }
  
  /* Background */
  .bg-primary { background: var(--primary-600); }
  .bg-gray { background: var(--gray-100); }
  .bg-white { background: white; }
  
  /* Border radius */
  .rounded { border-radius: var(--radius-md); }
  .rounded-lg { border-radius: var(--radius-lg); }
  .rounded-full { border-radius: var(--radius-full); }
  
  /* Shadow */
  .shadow-sm { box-shadow: var(--shadow-sm); }
  .shadow-md { box-shadow: var(--shadow-md); }
  .shadow-lg { box-shadow: var(--shadow-lg); }
  
  /* Width */
  .w-full { width: 100%; }
  .w-auto { width: auto; }
  
  /* Cursor */
  .cursor-pointer { cursor: pointer; }
  .cursor-not-allowed { cursor: not-allowed; }
  
  /* Overflow */
  .overflow-hidden { overflow: hidden; }
  .overflow-auto { overflow: auto; }
  
  /* Position */
  .relative { position: relative; }
  .absolute { position: absolute; }
  .fixed { position: fixed; }
  
  /* Visibility */
  .visible { visibility: visible; }
  .invisible { visibility: hidden; }
  .opacity-0 { opacity: 0; }
  .opacity-50 { opacity: 0.5; }
  .opacity-100 { opacity: 1; }
  </style>
</head>
<body>

  <!-- NAVIGATION -->
  <nav class="navbar" id="navbar">
    <div class="container">
      <div class="navbar-content">
        <!-- In Navbar -->
        <div class="logo">
          <img src="image/logo.png" alt="Miscellaneous Adventure" class="logo-image">
          <div class="logo-text">
            <div class="logo-title">Miscellaneous Adventure</div>
            <div class="logo-subtitle">Tax Officer Chronicles</div>
          </div>
        </div>

        <!-- Navigation Links (Desktop) -->
        <ul class="nav-links" id="navLinks">
          <li><a href="#features" class="nav-link">Features</a></li>
          <li><a href="#chapters" class="nav-link">Chapters</a></li>
          <li><a href="#how-it-works" class="nav-link">How It Works</a></li>
          <li><a href="#testimonials" class="nav-link">Reviews</a></li>
        </ul>

        <!-- Navigation Actions -->
        <div class="nav-actions" id="navActions">
          <button class="btn btn-ghost" id="navLoginBtn">Login</button>
          <button class="btn btn-primary" id="navSignupBtn">Get Started</button>
        </div>

        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle menu">
          <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 12h18M3 6h18M3 18h18"/>
          </svg>
        </button>
      </div>
    </div>
  </nav>

  <!-- HERO SECTION -->
  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <!-- Hero Left -->
        <div class="hero-left">
          <div class="hero-badge">
            <span class="badge-dot"></span>
            <span>New Season Available</span>
          </div>

          <h1>
            Become the <span class="text-gradient">Quirkiest Tax Officer</span> in the City
          </h1>

          <p class="hero-description">
            Dive into a hilarious story-driven adventure where you audit bizarre cases, make tough choices, and unlock legendary badges. No downloads, no heavy graphics—just pure narrative gold.
          </p>

          <div class="hero-cta">
            <button class="btn btn-primary btn-lg" id="heroStartBtn">
              <span>Start Your Journey</span>
              <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 12h14M12 5l7 7-7 7"/>
              </svg>
            </button>
            <button class="btn btn-outline btn-lg" id="heroWatchBtn">
              <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/>
              </svg>
              <span>Watch Trailer</span>
            </button>
          </div>

          <div class="hero-stats">
            <div class="hero-stat">
              <div class="hero-stat-value">10K+</div>
              <div class="hero-stat-label">Active Players</div>
            </div>
            <div class="hero-stat">
              <div class="hero-stat-value">4.9</div>
              <div class="hero-stat-label">Rating</div>
            </div>
            <div class="hero-stat">
              <div class="hero-stat-value">50+</div>
              <div class="hero-stat-label">Story Paths</div>
            </div>
          </div>
        </div>

        <!-- Hero Right - Visual Preview -->
        <div class="hero-right">
          <div class="hero-visual">
            <div class="preview-grid">
              <div class="preview-card">
                <div class="preview-card-icon">🏢</div>
                <div class="preview-card-title">City Office</div>
                <div class="preview-card-desc">Where your journey begins</div>
              </div>
              <div class="preview-card">
                <div class="preview-card-icon">🛒</div>
                <div class="preview-card-title">Market Street</div>
                <div class="preview-card-desc">Audit suspicious stalls</div>
              </div>
              <div class="preview-card">
                <div class="preview-card-icon">🌊</div>
                <div class="preview-card-title">Riverside</div>
                <div class="preview-card-desc">Uncover tax loopholes</div>
              </div>
              <div class="preview-card">
                <div class="preview-card-icon">⚖️</div>
                <div class="preview-card-title">High Court</div>
                <div class="preview-card-desc">Final showdown</div>
              </div>
            </div>

            <div class="preview-footer">
              <span class="preview-footer-text">Click any location to explore</span>
              <span class="preview-footer-icon">✨</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Loading Overlay (hidden by default) -->
  <div class="loading-overlay" id="loadingOverlay" style="display: none;">
    <div class="spinner spinner-lg"></div>
    <div class="loading-text">Loading your adventure...</div>
  </div>

    <!-- MAIN CONTENT CONTINUES -->

  <!-- FEATURES SECTION -->
  <section class="features-section" id="features">
    <div class="container">
      <div class="section-header">
        <div class="section-badge">⚡ KEY FEATURES</div>
        <h2>Everything You Need for an Epic Adventure</h2>
        <p class="section-description">
          Built with modern web technologies and designed for maximum engagement. No installations, no downloads—just pure storytelling excellence.
        </p>
      </div>

      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon">📖</div>
          <h3>Rich Storytelling</h3>
          <p>Immerse yourself in a carefully crafted narrative with memorable characters, witty dialogue, and unexpected plot twists.</p>
          <ul class="feature-list">
            <li>30+ hours of gameplay</li>
            <li>Multiple story arcs</li>
            <li>Dynamic character development</li>
            <li>Easter eggs & hidden content</li>
          </ul>
        </div>

        <div class="feature-card">
          <div class="feature-icon">🎯</div>
          <h3>Meaningful Choices</h3>
          <p>Every decision matters. Your choices shape the story, unlock different endings, and affect how characters perceive you.</p>
          <ul class="feature-list">
            <li>50+ decision points</li>
            <li>8 unique endings</li>
            <li>Karma system</li>
            <li>Consequence tracking</li>
          </ul>
        </div>

        <div class="feature-card">
          <div class="feature-icon">🏆</div>
          <h3>Achievement System</h3>
          <p>Collect badges, unlock special content, and compete on leaderboards. Show off your tax audit mastery!</p>
          <ul class="feature-list">
            <li>50+ achievements</li>
            <li>Rare collectibles</li>
            <li>Global leaderboard</li>
            <li>Profile customization</li>
          </ul>
        </div>

        <div class="feature-card">
          <div class="feature-icon">💾</div>
          <h3>Cloud Saves</h3>
          <p>Your progress is automatically saved to the cloud. Play on any device and pick up right where you left off.</p>
          <ul class="feature-list">
            <li>Auto-save every choice</li>
            <li>Cross-device sync</li>
            <li>Multiple save slots</li>
            <li>Backup & restore</li>
          </ul>
        </div>

        <div class="feature-card">
          <div class="feature-icon">🎨</div>
          <h3>Beautiful Design</h3>
          <p>Enjoy a clean, modern interface that works flawlessly on desktop, tablet, and mobile devices.</p>
          <ul class="feature-list">
            <li>Responsive layout</li>
            <li>Dark mode support</li>
            <li>Accessibility features</li>
            <li>Smooth animations</li>
          </ul>
        </div>

        <div class="feature-card">
          <div class="feature-icon">🔒</div>
          <h3>Secure & Private</h3>
          <p>Your data is encrypted and protected. We respect your privacy and never sell your information.</p>
          <ul class="feature-list">
            <li>End-to-end encryption</li>
            <li>GDPR compliant</li>
            <li>No ads or tracking</li>
            <li>Privacy-first approach</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- CHAPTERS SECTION -->
  <section class="chapters-section" id="chapters">
    <div class="container">
      <div class="chapters-header">
        <div>
          <div class="section-badge">🎮 GAME CONTENT</div>
          <h2>Explore All Chapters</h2>
        </div>
        <div class="chapters-filter">
          <button class="filter-btn active" data-filter="all">All</button>
          <button class="filter-btn" data-filter="available">Available</button>
          <button class="filter-btn" data-filter="locked">Locked</button>
          <button class="filter-btn" data-filter="completed">Completed</button>
        </div>
      </div>

      <div class="chapters-grid" id="chaptersGrid">
        <!-- Chapter cards will be dynamically inserted here -->
      </div>

      <div class="chapter-progress" style="margin-top: var(--space-12);">
        <div class="progress-label">
          <span>Overall Progress</span>
          <span id="overallProgress">0%</span>
        </div>
        <div class="progress progress-lg">
          <div class="progress-bar" id="progressBar" style="width: 0%"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- HOW IT WORKS SECTION -->
  <section class="how-it-works-section" id="how-it-works">
    <div class="container">
      <div class="section-header">
        <div class="section-badge">📋 GETTING STARTED</div>
        <h2>How It Works</h2>
        <p class="section-description">
          Get started in minutes. No complicated setup, no downloads—just create an account and start playing.
        </p>
      </div>

      <div class="steps-container">
        <div class="steps-line"></div>
        <div class="steps-grid">
          <div class="step">
            <div class="step-number-wrapper">
              <div class="step-number">1</div>
            </div>
            <div class="step-content">
              <h3>Create Your Account</h3>
              <p>Sign up with email or use your Google account for instant access. Takes less than 30 seconds.</p>
              <ul class="step-features">
                <li>Free forever</li>
                <li>No credit card required</li>
                <li>Instant verification</li>
              </ul>
            </div>
          </div>

          <div class="step">
            <div class="step-number-wrapper">
              <div class="step-number">2</div>
            </div>
            <div class="step-content">
              <h3>Choose Your Path</h3>
              <p>Start with Chapter 1 and work your way through increasingly complex cases. Each chapter unlocks new abilities.</p>
              <ul class="step-features">
                <li>Tutorial included</li>
                <li>Progressive difficulty</li>
                <li>Skip if experienced</li>
              </ul>
            </div>
          </div>

          <div class="step">
            <div class="step-number-wrapper">
              <div class="step-number">3</div>
            </div>
            <div class="step-content">
              <h3>Make Decisions</h3>
              <p>Face dilemmas, solve puzzles, and interact with quirky characters. Your choices have real consequences.</p>
              <ul class="step-features">
                <li>No wrong answers</li>
                <li>Multiple solutions</li>
                <li>Replayability</li>
              </ul>
            </div>
          </div>

          <div class="step">
            <div class="step-number-wrapper">
              <div class="step-number">4</div>
            </div>
            <div class="step-content">
              <h3>Track Your Progress</h3>
              <p>Earn achievements, unlock badges, and see how you stack up against other players on the leaderboard.</p>
              <ul class="step-features">
                <li>Real-time stats</li>
                <li>Shareable achievements</li>
                <li>Competitive rankings</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- TESTIMONIALS SECTION -->
  <section class="testimonials-section" id="testimonials">
    <div class="container">
      <div class="section-header">
        <div class="section-badge">💬 TESTIMONIALS</div>
        <h2>What Players Are Saying</h2>
        <p class="section-description">
          Join thousands of satisfied players who've discovered the joy of tax auditing (yes, really!).
        </p>
      </div>

      <div class="testimonials-grid">
        <div class="testimonial-card">
          <div class="testimonial-quote">"</div>
          <div class="testimonial-text">
            I never thought a game about tax auditing could be this entertaining! The writing is hilarious and the choices actually matter. Best browser game I've played all year.
          </div>
          <div class="testimonial-author">
            <div class="testimonial-avatar">SK</div>
            <div class="testimonial-info">
              <div class="testimonial-name">Sarah Kim</div>
              <div class="testimonial-role">Completed all chapters</div>
            </div>
          </div>
          <div class="testimonial-rating">★★★★★</div>
        </div>

        <div class="testimonial-card">
          <div class="testimonial-quote">"</div>
          <div class="testimonial-text">
            The attention to detail is incredible. Every character feels unique, and I found myself genuinely caring about the outcomes. Can't wait for new chapters!
          </div>
          <div class="testimonial-author">
            <div class="testimonial-avatar">MJ</div>
            <div class="testimonial-info">
              <div class="testimonial-name">Marcus Johnson</div>
              <div class="testimonial-role">Achievement hunter</div>
            </div>
          </div>
          <div class="testimonial-rating">★★★★★</div>
        </div>

        <div class="testimonial-card">
          <div class="testimonial-quote">"</div>
          <div class="testimonial-text">
            Perfect for playing during lunch breaks. The cloud save feature means I can switch between my laptop and phone seamlessly. Highly recommended!
          </div>
          <div class="testimonial-author">
            <div class="testimonial-avatar">EP</div>
            <div class="testimonial-info">
              <div class="testimonial-name">Emily Parker</div>
              <div class="testimonial-role">Daily player</div>
            </div>
          </div>
          <div class="testimonial-rating">★★★★★</div>
        </div>
      </div>
    </div>
  </section>

  <!-- STATS SECTION -->
  <section class="stats-section">
    <div class="container">
      <div class="stats-grid">
        <div class="stat-item">
          <span class="stat-value" data-count="10000">0</span>
          <div class="stat-label">Active Players</div>
          <div class="stat-sublabel">And growing daily</div>
        </div>
        <div class="stat-item">
          <span class="stat-value" data-count="50">0</span>
          <div class="stat-label">Story Paths</div>
          <div class="stat-sublabel">Unique combinations</div>
        </div>
        <div class="stat-item">
          <span class="stat-value">4.9</span>
          <div class="stat-label">Average Rating</div>
          <div class="stat-sublabel">From 2,500+ reviews</div>
        </div>
        <div class="stat-item">
          <span class="stat-value" data-count="30">0</span>
          <div class="stat-label">Hours of Content</div>
          <div class="stat-sublabel">And counting</div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA SECTION -->
  <section class="cta-section">
    <div class="container">
      <div class="cta-content">
        <h2>Ready to Start Your Tax Officer Journey?</h2>
        <p>Join thousands of players and discover why this is the most entertaining game about taxes you'll ever play.</p>
        <div class="cta-buttons">
          <button class="btn btn-white btn-lg" id="ctaSignupBtn">
            Create Free Account
          </button>
          <button class="btn btn-outline-white btn-lg" id="ctaLoginBtn">
            I Already Have an Account
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <div class="footer-logo">
            <img src="image/logo.png" alt="Miscellaneous Adventure" class="footer-logo-image">
            <div class="footer-logo-text">Miscellaneous Adventure</div>
          </div>
          <p class="footer-description">
            A story-driven web game about becoming the most legendary tax officer in the city. Made with passion and humor.
          </p>
          <div class="footer-social">
            <a href="#" class="social-link" aria-label="Twitter">
              <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"/>
              </svg>
            </a>
            <a href="#" class="social-link" aria-label="Discord">
              <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.617-1.25.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 00.031.057 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 00-.041-.106 13.107 13.107 0 01-1.872-.892.077.077 0 01-.008-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.127 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 00-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
              </svg>
            </a>
            <a href="#" class="social-link" aria-label="GitHub">
              <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
              </svg>
            </a>
          </div>
        </div>

        <div class="footer-links-group">
          <h4>Product</h4>
          <ul class="footer-links">
            <li><a href="#features">Features</a></li>
            <li><a href="#chapters">Chapters</a></li>
            <li><a href="#how-it-works">How It Works</a></li>
            <li><a href="#pricing">Pricing</a></li>
            <li><a href="#roadmap">Roadmap</a></li>
          </ul>
        </div>

        <div class="footer-links-group">
          <h4>Company</h4>
          <ul class="footer-links">
            <li><a href="#about">About Us</a></li>
            <li><a href="#blog">Blog</a></li>
            <li><a href="#careers">Careers</a></li>
            <li><a href="#press">Press Kit</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div>

        <div class="footer-links-group">
          <h4>Legal</h4>
          <ul class="footer-links">
            <li><a href="#privacy">Privacy Policy</a></li>
            <li><a href="#terms">Terms of Service</a></li>
            <li><a href="#cookies">Cookie Policy</a></li>
            <li><a href="#dmca">DMCA</a></li>
          </ul>
        </div>
      </div>

      <div class="footer-bottom">
        <div>© 2024 <strong>Miscellaneous Adventure</strong>. All rights reserved.</div>
        <ul class="footer-bottom-links">
          <li><a href="#sitemap">Sitemap</a></li>
          <li><a href="#accessibility">Accessibility</a></li>
          <li><a href="#status">Status</a></li>
        </ul>
      </div>
    </div>
  </footer>

  <!-- LOGIN MODAL -->
  <div class="modal-overlay auth-modal" id="loginModal">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">Welcome Back</h2>
        <p class="modal-subtitle">Sign in to continue your adventure</p>
        <button class="modal-close" data-modal-close="loginModal" aria-label="Close">
          <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="modal-body">
        <div class="social-login-grid">
          <button class="btn-social" id="loginGoogleBtn">
            <svg width="20" height="20" viewBox="0 0 24 24">
              <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
              <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
              <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
              <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
            </svg>
            <span>Google</span>
          </button>
          <button class="btn-social">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
            <span>GitHub</span>
          </button>
        </div>

        <div class="auth-divider">or continue with email</div>

        <form id="loginForm">
          <div class="form-group">
            <label for="loginEmail" class="form-label form-label-required">Email</label>
            <div class="form-input-group">
              <span class="form-input-icon">
                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                  <polyline points="22,6 12,13 2,6"/>
                </svg>
              </span>
              <input type="email" id="loginEmail" class="form-input" placeholder="you@example.com" required autocomplete="email">
            </div>
          </div>

          <div class="form-group">
            <label for="loginPassword" class="form-label form-label-required">Password</label>
            <div class="form-input-group">
              <span class="form-input-icon">
                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                </svg>
              </span>
              <input type="password" id="loginPassword" class="form-input" placeholder="••••••••" required autocomplete="current-password">
              <button type="button" class="form-input-action btn btn-ghost btn-sm btn-icon" id="toggleLoginPassword">
                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                  <circle cx="12" cy="12" r="3"/>
                </svg>
              </button>
            </div>
          </div>

          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-6);">
            <div class="form-check">
              <input type="checkbox" id="rememberMe">
              <label for="rememberMe" class="form-check-label">Remember me</label>
            </div>
            <a href="#" class="text-sm text-primary" id="forgotPasswordLink">Forgot password?</a>
          </div>

          <button type="submit" class="btn btn-primary w-full" id="loginSubmitBtn">
            Sign In
          </button>
        </form>
      </div>

      <div class="modal-footer">
        <p class="auth-footer-text">
          Don't have an account? <a href="#" id="switchToSignup">Create one now</a>
        </p>
      </div>
    </div>
  </div>

  <!-- SIGNUP MODAL -->
  <div class="modal-overlay auth-modal" id="signupModal">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">Create Your Account</h2>
        <p class="modal-subtitle">Join thousands of tax officer adventurers</p>
        <button class="modal-close" data-modal-close="signupModal" aria-label="Close">
          <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="modal-body">
        <div class="social-login-grid">
          <button class="btn-social" id="signupGoogleBtn">
            <svg width="20" height="20" viewBox="0 0 24 24">
              <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
              <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
              <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
              <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
            </svg>
            <span>Google</span>
          </button>
          <button class="btn-social">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
            <span>GitHub</span>
          </button>
        </div>

        <div class="auth-divider">or sign up with email</div>

        <form id="signupForm">
          <div class="form-group">
            <label for="signupName" class="form-label form-label-required">Display Name</label>
            <input type="text" id="signupName" class="form-input" placeholder="Your name" required>
          </div>

          <div class="form-group">
            <label for="signupEmail" class="form-label form-label-required">Email</label>
            <input type="email" id="signupEmail" class="form-input" placeholder="you@example.com" required autocomplete="email">
          </div>

          <div class="form-group">
            <label for="signupPassword" class="form-label form-label-required">Password</label>
            <input type="password" id="signupPassword" class="form-input" placeholder="Create a strong password" required autocomplete="new-password">
            <div class="password-strength" id="passwordStrength" style="display: none;">
              <div class="password-strength-bar">
                <div class="password-strength-fill" id="passwordStrengthFill"></div>
              </div>
              <div class="password-strength-label" id="passwordStrengthLabel"></div>
            </div>
          </div>

          <div class="form-group">
            <div class="form-check">
              <input type="checkbox" id="agreeTerms" required>
              <label for="agreeTerms" class="form-check-label">
                I agree to the <a href="#" class="text-primary">Terms of Service</a> and <a href="#" class="text-primary">Privacy Policy</a>
              </label>
            </div>
          </div>

          <button type="submit" class="btn btn-primary w-full" id="signupSubmitBtn">
            Create Account
          </button>
        </form>
      </div>

      <div class="modal-footer">
        <p class="auth-footer-text">
          Already have an account? <a href="#" id="switchToLogin">Sign in</a>
        </p>
      </div>
    </div>
  </div>

  <!-- RESET PASSWORD MODAL -->
  <div class="modal-overlay auth-modal" id="resetPasswordModal">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">Reset Password</h2>
        <p class="modal-subtitle">We'll send you a reset link</p>
        <button class="modal-close" data-modal-close="resetPasswordModal" aria-label="Close">
          <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="modal-body">
        <form id="resetPasswordForm">
          <div class="form-group">
            <label for="resetEmail" class="form-label form-label-required">Email</label>
            <input type="email" id="resetEmail" class="form-input" placeholder="you@example.com" required autocomplete="email">
            <p class="form-helper">Enter the email associated with your account</p>
          </div>

          <button type="submit" class="btn btn-primary w-full">
            Send Reset Link
          </button>
        </form>
      </div>

      <div class="modal-footer">
        <p class="auth-footer-text">
          Remember your password? <a href="#" id="backToLogin">Sign in</a>
        </p>
      </div>
    </div>
  </div>

  <script type="module">
    // Import centralized services
    import { authService } from './Firebase/auth-service.js';
    import { userService } from './Firebase/user-service.js';

    /* ==========================================
    JAVASCRIPT - Complete Application Logic (Updated for Centralized Services)
    ========================================== */

    // ==========================================
    // STATE MANAGEMENT
    // ==========================================
    const appState = {
      currentUser: null,
      userProgress: {
        completed: [],
        current: null,
        achievements: []
      },
      chapters: [
        {
          id: 'ch-1',
          number: 1,
          title: 'Office Chaos',
          description: 'Your first day on the job — and the entire tax office is already in chaos. Time to fix the mess before your boss finds out.',
          icon: '🏢',
          difficulty: 1,
          duration: '30 min',
          status: 'unlocked'
        },
        {
          id: 'ch-2',
          number: 2,
          title: 'The Bribe Chase',
          description: 'A mysterious envelope, a nervous businessman, and a ticking deadline. Can you trace the bribe before the media does?',
          icon: '💼',
          difficulty: 2,
          duration: '45 min',
          status: 'locked'
        },
        {
          id: 'ch-3',
          number: 3,
          title: 'Midnight Raid',
          description: 'When the city sleeps, you raid the biggest accounting firm in town. Nothing about this night will go as planned.',
          icon: '🌙',
          difficulty: 3,
          duration: '60 min',
          status: 'locked'
        }
      ]
    };

    // ==========================================
    // UTILITY FUNCTIONS
    // ==========================================
    const utils = {
      // DOM selectors
      $(selector, parent = document) {
        return parent.querySelector(selector);
      },
      
      $$(selector, parent = document) {
        return Array.from(parent.querySelectorAll(selector));
      },

      // Show toast notification
      showToast(message, type = 'info', duration = 3000) {
        const container = this.$('#toastContainer');
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        
        const icons = {
          success: '✓',
          error: '✕',
          warning: '⚠',
          info: 'ℹ'
        };

        toast.innerHTML = `
          <div class="toast-icon">${icons[type] || icons.info}</div>
          <div class="toast-content">
            <div class="toast-message">${message}</div>
          </div>
          <button class="toast-close" onclick="this.parentElement.remove()">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 4L4 12M4 4l8 8"/>
            </svg>
          </button>
          <div class="toast-progress"></div>
        `;

        container.appendChild(toast);

        setTimeout(() => {
          toast.classList.add('removing');
          setTimeout(() => toast.remove(), 300);
        }, duration);
      },

      // Show loading overlay
      showLoading(text = 'Loading...') {
        const overlay = this.$('#loadingOverlay');
        if (overlay) {
          this.$('.loading-text', overlay).textContent = text;
          overlay.style.display = 'flex';
        }
      },

      hideLoading() {
        const overlay = this.$('#loadingOverlay');
        if (overlay) overlay.style.display = 'none';
      },

      // Animate counter
      animateCounter(element, target, duration = 2000) {
        const start = 0;
        const increment = target / (duration / 16);
        let current = start;

        const timer = setInterval(() => {
          current += increment;
          if (current >= target) {
            element.textContent = target.toLocaleString();
            clearInterval(timer);
          } else {
            element.textContent = Math.floor(current).toLocaleString();
          }
        }, 16);
      },

      // Validate email
      isValidEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      },

      // Check password strength
      getPasswordStrength(password) {
        let strength = 0;
        if (password.length >= 8) strength++;
        if (password.length >= 12) strength++;
        if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
        if (/\d/.test(password)) strength++;
        if (/[^a-zA-Z0-9]/.test(password)) strength++;

        if (strength <= 2) return { level: 'weak', label: 'Weak Password' };
        if (strength <= 3) return { level: 'medium', label: 'Medium Password' };
        return { level: 'strong', label: 'Strong Password' };
      }
    };

    // ==========================================
    // MODAL SYSTEM
    // ==========================================
    const modalSystem = {
      open(modalId) {
        const modal = utils.$(`#${modalId}`);
        if (!modal) return;
        
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
        
        // Focus first input
        const firstInput = utils.$('input', modal);
        if (firstInput) setTimeout(() => firstInput.focus(), 100);
      },

      close(modalId) {
        const modal = utils.$(`#${modalId}`);
        if (!modal) return;
        
        modal.classList.remove('active');
        document.body.style.overflow = '';
        
        // Clear forms
        const form = utils.$('form', modal);
        if (form) form.reset();
      },

      init() {
        // Close buttons
        utils.$$('[data-modal-close]').forEach(btn => {
          btn.addEventListener('click', () => {
            this.close(btn.dataset.modalClose);
          });
        });

        // Click outside to close
        utils.$$('.modal-overlay').forEach(overlay => {
          overlay.addEventListener('click', (e) => {
            if (e.target === overlay) {
              this.close(overlay.id);
            }
          });
        });

        // ESC key to close
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') {
            utils.$$('.modal-overlay.active').forEach(modal => {
              this.close(modal.id);
            });
          }
        });
      }
    };

    // ==========================================
    // AUTHENTICATION (Updated for Centralized Services)
    // ==========================================
    const authSystem = {
      async signUpWithEmail(name, email, password) {
        try {
          utils.showLoading('Creating your account...');
          
          const user = await authService.signUpWithEmail(name, email, password);
          
          utils.hideLoading();
          modalSystem.close('signupModal');
          utils.showToast(`Welcome, ${name}! Your adventure begins now.`, 'success');
          
          return user;
        } catch (error) {
          utils.hideLoading();
          this.handleAuthError(error);
          throw error;
        }
      },

      async signInWithEmail(email, password) {
        try {
          utils.showLoading('Signing you in...');
          
          const user = await authService.signInWithEmail(email, password);
          
          utils.hideLoading();
          modalSystem.close('loginModal');
          utils.showToast(`Welcome back, ${user.displayName || 'Adventurer'}!`, 'success');
          
          return user;
        } catch (error) {
          utils.hideLoading();
          this.handleAuthError(error);
          throw error;
        }
      },

      async signInWithGoogle() {
        try {
          utils.showLoading('Opening Google Sign-In...');
          
          const user = await authService.signInWithGoogle();
          
          utils.hideLoading();
          modalSystem.close('loginModal');
          modalSystem.close('signupModal');
          utils.showToast(`Welcome, ${user.displayName}!`, 'success');
          
          return user;
        } catch (error) {
          utils.hideLoading();
          if (error.code !== 'auth/popup-closed-by-user') {
            this.handleAuthError(error);
          }
          throw error;
        }
      },

      async resetPassword(email) {
        try {
          utils.showLoading('Sending reset link...');
          
          await authService.resetPassword(email);
          
          utils.hideLoading();
          modalSystem.close('resetPasswordModal');
          utils.showToast('Password reset link sent! Check your email.', 'success');
        } catch (error) {
          utils.hideLoading();
          this.handleAuthError(error);
          throw error;
        }
      },

      async signOut() {
        try {
          await authService.signOutUser();
          utils.showToast('Signed out successfully', 'success');
          window.location.reload();
        } catch (error) {
          this.handleAuthError(error);
        }
      },

      handleAuthError(error) {
        const errorMessages = {
          'auth/email-already-in-use': 'This email is already registered. Try signing in instead.',
          'auth/invalid-email': 'Please enter a valid email address.',
          'auth/operation-not-allowed': 'This sign-in method is not enabled.',
          'auth/weak-password': 'Password should be at least 6 characters long.',
          'auth/user-disabled': 'This account has been disabled.',
          'auth/user-not-found': 'No account found with this email.',
          'auth/wrong-password': 'Incorrect password. Please try again.',
          'auth/too-many-requests': 'Too many failed attempts. Please try again later.',
          'auth/network-request-failed': 'Network error. Please check your connection.'
        };

        const message = errorMessages[error.code] || error.message || 'An error occurred';
        utils.showToast(message, 'error');
      },

      async loadUserProgress(uid) {
        try {
          const progress = await userService.getUserProgress(uid);
          if (progress) {
            appState.userProgress = progress;
            
            // Update chapter statuses
            appState.chapters.forEach((chapter, index) => {
              if (appState.userProgress.completed.includes(chapter.id)) {
                chapter.status = 'completed';
              } else if (index === 0 || appState.userProgress.completed.includes(appState.chapters[index - 1].id)) {
                chapter.status = 'unlocked';
              } else {
                chapter.status = 'locked';
              }
            });
            
            chapterSystem.render();
            this.updateProgressBar();
          }
        } catch (error) {
          console.error('Error loading user progress:', error);
        }
      },

      updateProgressBar() {
        const completed = appState.userProgress.completed.length;
        const total = appState.chapters.length;
        const percentage = (completed / total) * 100;
        
        const progressBar = utils.$('#progressBar');
        const progressText = utils.$('#overallProgress');
        
        if (progressBar) progressBar.style.width = `${percentage}%`;
        if (progressText) progressText.textContent = `${Math.round(percentage)}%`;
      },

      updateUIForAuthenticatedUser(user) {
        const navActions = utils.$('#navActions');
        if (navActions) {
          navActions.innerHTML = `
            <div class="dropdown">
              <button class="btn btn-ghost" onclick="document.querySelector('.dropdown').classList.toggle('active')">
                <div class="avatar avatar-sm">
                  ${user.photoURL ? `<img src="${user.photoURL}" alt="${user.displayName}">` : user.displayName?.charAt(0) || 'U'}
                </div>
                <span>${user.displayName || 'Account'}</span>
              </button>
              <div class="dropdown-menu">
                <a href="#dashboard" class="dropdown-item">
                  <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="7" height="7"/>
                    <rect x="14" y="3" width="7" height="7"/>
                    <rect x="14" y="14" width="7" height="7"/>
                    <rect x="3" y="14" width="7" height="7"/>
                  </svg>
                  Dashboard
                </a>
                <a href="#profile" class="dropdown-item">
                  <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                  </svg>
                  Profile
                </a>
                <a href="#settings" class="dropdown-item">
                  <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"/>
                    <path d="M12 1v6m0 6v6M5.2 5.2l4.2 4.2m5.2 5.2l4.2 4.2M1 12h6m6 0h6M5.2 18.8l4.2-4.2m5.2-5.2l4.2-4.2"/>
                  </svg>
                  Settings
                </a>
                <div class="dropdown-divider"></div>
                <a href="#" class="dropdown-item danger" onclick="authSystem.signOut()">
                  <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                    <polyline points="16 17 21 12 16 7"/>
                    <line x1="21" y1="12" x2="9" y2="12"/>
                  </svg>
                  Sign Out
                </a>
              </div>
            </div>
          `;
        }
      },

      updateUIForUnauthenticatedUser() {
        const navActions = utils.$('#navActions');
        if (navActions) {
          navActions.innerHTML = `
            <button class="btn btn-ghost" id="navLoginBtn">Login</button>
            <button class="btn btn-primary" id="navSignupBtn">Get Started</button>
          `;
          
          // Re-attach event listeners
          utils.$('#navLoginBtn')?.addEventListener('click', () => modalSystem.open('loginModal'));
          utils.$('#navSignupBtn')?.addEventListener('click', () => modalSystem.open('signupModal'));
        }
      },

      init() {
        // Auth state observer using centralized service
        authService.onAuthStateChange(async (user) => {
          appState.currentUser = user;
          
          if (user) {
            await this.loadUserProgress(user.uid);
            this.updateUIForAuthenticatedUser(user);
          } else {
            this.updateUIForUnauthenticatedUser();
          }
        });
      }
    };

    // ==========================================
    // CHAPTER SYSTEM (Updated for Centralized Services)
    // ==========================================
    const chapterSystem = {
      render() {
        const container = utils.$('#chaptersGrid');
        if (!container) return;

        container.innerHTML = appState.chapters.map(chapter => `
          <div class="chapter-card ${chapter.status}" data-chapter-id="${chapter.id}">
            <div class="chapter-header">
              <div class="chapter-number">CH ${chapter.number}</div>
              <div class="chapter-status ${chapter.status}">
                ${chapter.status === 'completed' ? 'Completed' : chapter.status === 'locked' ? 'Locked' : 'Available'}
              </div>
              <div class="chapter-icon">${chapter.icon}</div>
            </div>
            
            <div class="chapter-body">
              <h3 class="chapter-title">${chapter.title}</h3>
              <p class="chapter-description">${chapter.description}</p>
              
              <div class="chapter-meta">
                <div class="chapter-meta-item">
                  <div class="chapter-meta-label">Difficulty</div>
                  <div class="chapter-meta-value">
                    <div class="difficulty">
                      ${[1,2,3].map(i => `<div class="difficulty-dot ${i <= chapter.difficulty ? 'active' : ''}"></div>`).join('')}
                    </div>
                  </div>
                </div>
                <div class="chapter-meta-item">
                  <div class="chapter-meta-label">Duration</div>
                  <div class="chapter-meta-value">
                    <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="7" cy="7" r="6"/>
                      <polyline points="7 3 7 7 10 10"/>
                    </svg>
                    ${chapter.duration}
                  </div>
                </div>
              </div>
              
              <div class="chapter-footer">
                ${chapter.status === 'locked' 
                  ? '<button class="btn btn-secondary" disabled>🔒 Locked</button>'
                  : chapter.status === 'completed'
                    ? `<button class="btn btn-outline" onclick="chapterSystem.play('${chapter.id}')">Replay</button>
                      <button class="btn btn-primary" onclick="chapterSystem.play('${chapter.id}')">Continue</button>`
                    : `<button class="btn btn-primary w-full" onclick="chapterSystem.play('${chapter.id}')">
                        ${chapter.id === appState.userProgress.current ? 'Continue' : 'Start Chapter'}
                      </button>`
                }
              </div>
            </div>
          </div>
        `).join('');
      },

      play(chapterId) {
        if (!appState.currentUser) {
          utils.showToast('Please sign in to play chapters', 'warning');
          modalSystem.open('loginModal');
          return;
        }

        const chapter = appState.chapters.find(ch => ch.id === chapterId);
        if (!chapter || chapter.status === 'locked') {
          utils.showToast('This chapter is locked. Complete previous chapters first!', 'warning');
          return;
        }
        
        // Construct the chapter URL based on the chapter ID
        const chapterUrl = `chapter-${chapter.number}.html`;
        utils.showToast(`Loading ${chapter.title}...`, 'info');
        window.location.href = chapterUrl;
      },

      async completeChapter(chapterId) {
        if (!appState.currentUser) return;

        try {
          // Use centralized service to save progress
          await userService.completeChapter(appState.currentUser.uid, chapterId);

          utils.showToast('Chapter completed! 🎉', 'success');
          
          // Reload progress from centralized service
          await authSystem.loadUserProgress(appState.currentUser.uid);
        } catch (error) {
          console.error('Error completing chapter:', error);
          utils.showToast('Error saving progress', 'error');
        }
      },

      init() {
        this.render();

        // Filter buttons
        utils.$$('.filter-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            utils.$$('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            const filter = btn.dataset.filter;
            utils.$$('.chapter-card').forEach(card => {
              if (filter === 'all') {
                card.style.display = '';
              } else {
                const status = card.classList.contains(filter) ? '' : 'none';
                card.style.display = status;
              }
            });
          });
        });
      }
    };

    // ==========================================
    // FORM HANDLERS
    // ==========================================
    const formHandlers = {
      init() {
        // Login form
        utils.$('#loginForm')?.addEventListener('submit', async (e) => {
          e.preventDefault();
          const email = utils.$('#loginEmail').value;
          const password = utils.$('#loginPassword').value;
          
          if (!utils.isValidEmail(email)) {
            utils.showToast('Please enter a valid email', 'error');
            return;
          }
          
          await authSystem.signInWithEmail(email, password);
        });

        // Signup form
        utils.$('#signupForm')?.addEventListener('submit', async (e) => {
          e.preventDefault();
          const name = utils.$('#signupName').value.trim();
          const email = utils.$('#signupEmail').value.trim();
          const password = utils.$('#signupPassword').value;
          const agreeTerms = utils.$('#agreeTerms').checked;
          
          if (!name) {
            utils.showToast('Please enter your name', 'error');
            return;
          }
          
          if (!utils.isValidEmail(email)) {
            utils.showToast('Please enter a valid email', 'error');
            return;
          }
          
          if (password.length < 6) {
            utils.showToast('Password must be at least 6 characters', 'error');
            return;
          }
          
          if (!agreeTerms) {
            utils.showToast('Please agree to the terms of service', 'error');
            return;
          }
          
          await authSystem.signUpWithEmail(name, email, password);
        });

        // Reset password form
        utils.$('#resetPasswordForm')?.addEventListener('submit', async (e) => {
          e.preventDefault();
          const email = utils.$('#resetEmail').value.trim();
          
          if (!utils.isValidEmail(email)) {
            utils.showToast('Please enter a valid email', 'error');
            return;
          }
          
          await authSystem.resetPassword(email);
        });

        // Password strength indicator
        utils.$('#signupPassword')?.addEventListener('input', (e) => {
          const password = e.target.value;
          const strengthContainer = utils.$('#passwordStrength');
          const strengthFill = utils.$('#passwordStrengthFill');
          const strengthLabel = utils.$('#passwordStrengthLabel');
          
          if (password.length === 0) {
            strengthContainer.style.display = 'none';
            return;
          }
          
          strengthContainer.style.display = 'block';
          const { level, label } = utils.getPasswordStrength(password);
          
          strengthFill.className = `password-strength-fill ${level}`;
          strengthLabel.className = `password-strength-label ${level}`;
          strengthLabel.textContent = label;
        });

        // Toggle password visibility
        utils.$('#toggleLoginPassword')?.addEventListener('click', () => {
          const input = utils.$('#loginPassword');
          input.type = input.type === 'password' ? 'text' : 'password';
        });

        // Google sign-in buttons
        utils.$('#loginGoogleBtn')?.addEventListener('click', () => authSystem.signInWithGoogle());
        utils.$('#signupGoogleBtn')?.addEventListener('click', () => authSystem.signInWithGoogle());
      }
    };

    // ==========================================
    // NAVIGATION HANDLERS
    // ==========================================
    const navigationHandlers = {
      init() {
        // Smooth scroll for anchor links
        utils.$$('a[href^="#"]').forEach(anchor => {
          anchor.addEventListener('click', function(e) {
            const href = this.getAttribute('href');
            if (href === '#') return;
            
            e.preventDefault();
            const target = utils.$(href);
            if (target) {
              target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
          });
        });

        // Navbar scroll effect
        let lastScroll = 0;
        window.addEventListener('scroll', () => {
          const navbar = utils.$('#navbar');
          const currentScroll = window.pageYOffset;
          
          if (currentScroll > 100) {
            navbar?.classList.add('scrolled');
          } else {
            navbar?.classList.remove('scrolled');
          }
          
          lastScroll = currentScroll;
        });

        // Modal switching
        utils.$('#switchToSignup')?.addEventListener('click', (e) => {
          e.preventDefault();
          modalSystem.close('loginModal');
          modalSystem.open('signupModal');
        });

        utils.$('#switchToLogin')?.addEventListener('click', (e) => {
          e.preventDefault();
          modalSystem.close('signupModal');
          modalSystem.open('loginModal');
        });

        utils.$('#forgotPasswordLink')?.addEventListener('click', (e) => {
          e.preventDefault();
          modalSystem.close('loginModal');
          modalSystem.open('resetPasswordModal');
        });

        utils.$('#backToLogin')?.addEventListener('click', (e) => {
          e.preventDefault();
          modalSystem.close('resetPasswordModal');
          modalSystem.open('loginModal');
        });

        // CTA buttons
        utils.$('#heroStartBtn')?.addEventListener('click', () => modalSystem.open('signupModal'));
        utils.$('#ctaSignupBtn')?.addEventListener('click', () => modalSystem.open('signupModal'));
        utils.$('#ctaLoginBtn')?.addEventListener('click', () => modalSystem.open('loginModal'));
        utils.$('#navLoginBtn')?.addEventListener('click', () => modalSystem.open('loginModal'));
        utils.$('#navSignupBtn')?.addEventListener('click', () => modalSystem.open('signupModal'));
      }
    };

    // ==========================================
    // ANIMATIONS & EFFECTS
    // ==========================================
    const animations = {
      init() {
        // Animate stats on scroll
        const statsSection = utils.$('.stats-section');
        if (statsSection) {
          const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                utils.$$('.stat-value').forEach(stat => {
                  const target = parseInt(stat.dataset.count);
                  if (target) {
                    utils.animateCounter(stat, target);
                  }
                });
                observer.unobserve(entry.target);
              }
            });
          });
          
          observer.observe(statsSection);
        }

        // Intersection observer for fade-in animations
        const observerOptions = {
          threshold: 0.1,
          rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.style.opacity = '1';
              entry.target.style.transform = 'translateY(0)';
            }
          });
        }, observerOptions);

        utils.$$('.feature-card, .chapter-card, .testimonial-card').forEach(el => {
          el.style.opacity = '0';
          el.style.transform = 'translateY(20px)';
          el.style.transition = 'all 0.6s ease';
          observer.observe(el);
        });
      }
    };

    // ==========================================
    // EXPOSE FUNCTIONS TO GLOBAL SCOPE
    // ==========================================
    window.chapterSystem = chapterSystem;
    window.authSystem = authSystem;
    window.modalSystem = modalSystem;

    // ==========================================
    // INITIALIZATION
    // ==========================================
    document.addEventListener('DOMContentLoaded', () => {
      console.log('🎮 Miscellaneous Adventure - Initializing...');
      
      modalSystem.init();
      authSystem.init();
      chapterSystem.init();
      formHandlers.init();
      navigationHandlers.init();
      animations.init();
      
      console.log('✅ Application ready!');
    });
    
    // ==========================================
    // GLOBAL ERROR HANDLER
    // ==========================================
    window.addEventListener('error', (e) => {
      console.error('Global error:', e.error);
      utils.showToast('An unexpected error occurred', 'error');
    });

    window.addEventListener('unhandledrejection', (e) => {
      console.error('Unhandled promise rejection:', e.reason);
    });
</script>
</body>
</html>